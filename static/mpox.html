<html>
<head>
    <link rel="stylesheet" href="mpox.css">
    <title>Mpox Model Inference</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

    <!-- Disclaimer -->
    <div id="disclaimerSection" class="container my-5" style="display:block">
        <h1 class="text-center">
            Please see the disclaimer before proceeding
        </h1>
        <button id="openDisclaimerBtn" class="text-center">
            Open Disclaimer
        </button>
        <!-- The Modal -->
        <div id="disclaimerModal" class="modal" tabindex="-1">
            <div class="modal-dialog">
                <!-- Modal content -->
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 class="modal-title">
                            Disclaimer
                        </h2>
                        <span class="close">&times;</span>
                        <!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
                    </div>
                        <div class="modal-body">
                            <p>Welcome to our Mpox Detection Tool. 
                                Please be advised that this tool is 
                                intended for research purposes only and 
                                is not a substitute for professional medical advice, 
                                diagnosis, or treatment. The images and survey data 
                                you provide will be collected anonymously and used solely 
                                for the purpose of improving our understanding and detection 
                                of mpox. By continuing, you consent to the collection and use 
                                of your data in accordance with these terms. Please 
                                consult a healthcare professional for any medical concerns.</p>
                        </div>
                    <div class="modal-footer">
                        <h3>Thank you, <br>
                            Jonathan Gong</h3>
                        <h4>
                            <button id="agreeBtn", class="btn btn-success">Agree</button>
                        </h4>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Survey-->
    <div id="surveySection" class="container my-5" style="display:none">
        <h1 class="text-center">
            Welcome to the Mpox Detector
        </h1>
          <h1 class="text-center">Mpox Survey</h1>
          <p>Please fill out the following survey to help us understand your symptoms and potential exposure to mpox.</p>
            <form id="surveyForm" enctype="multipart/form-data">
              <div class="form-group mb-3">
                  <label for="symptom_onset">When did your symptoms start?</label>
                  <input type="date"id="symptom_onset" name="symptom_onset" class="form-control" required>
              </div>
              <div class="form-group mb-3">
                  <label for="symptoms">List your symptoms:</label>
                  <textarea id="symptoms" name="symptoms" class="form-control" rows="3" required></textarea>
              </div>
              <div class="form-group mb-3">
                  <label for="travel_history">Have you traveled recently? If yes, where?</label>
                  <input type="text" id="travel_history" name="travel_history" class="form-control" required>
              </div>
              <div class="form-group mb-3">
                  <label for="contact_history">Have you had contact with a known mpox case?</label>
                  <input type="text" id="contact_history" name="contact_history" class="form-control" required>
              </div>
              <div class="form-group mb-3">
                <label for="medical_image">Input your PNG image for diagnosis</label>
                <input type="file", accept="image/png" id="medical_image" name="medical_image" class="form-control" required>
              </div>
              <button type="submit", id = "surveybtn", class="btn btn-primary">Submit</button>
            </form>
    </div>

    <!-- Survey Results -->
    <div class="container my-5">
        <div id="surveyresult"></div>
        <button type="submit" id="tomodelbtn" class="btn-btn secondary" style="display: none;">Go To Model</button>
    </div>

        <!-- <button type="submit" id="tomodelbtn" style="display: none;">Go To Model</button> -->
    <div id="modelSection" class="container my-5" style="display:none">
        <!-- Button to Run Model -->
        <h1 class="text-center">Results</h1>
        <button type="submit" id="modelrunbtn" class="btn btn-primary">Run Model</button>
        <div id="loadingContainer" class="mt-4" style="display:none;">
            <div id="loadingBar" class="progress-bar progress-bar-striped bg-info" style="width: 0%; height: 20px; background-color: blue;"></div>
            <p id="loadingText" class="mt-2 text-center">Loading model: 0%</p>
        </div>
    </div>

    <!-- Results of the prediction -->
    <div id="result" class="container text-center my-5">
        <canvas id="predictionChart" width="400" height="200"></canvas>
    </div>

    <!-- js libraries and files -->
    <script src="survey_loader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="model_loader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>
</html>